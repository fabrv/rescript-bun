// Generated by ReScript, PLEASE EDIT WITH CARE

import * as RescriptCore from "@rescript/core/src/RescriptCore.js";

var server = Bun.serve({
      port: 4000,
      fetch: (async function (req, _server) {
          var url = new URL(req.url);
          var match = url.pathname;
          switch (match) {
            case "/" :
                return new Response(Bun.file("index.html"));
            case "/action" :
                var formData = await req.formData();
                formData.get("name");
                var profilePicture = formData.get("profilePicture");
                if (!(profilePicture instanceof File) && typeof profilePicture !== "string") {
                  return RescriptCore.panic("Must upload a profile picture");
                }
                if (typeof profilePicture === "string") {
                  return RescriptCore.panic("Must upload a profile picture");
                }
                await Bun.write("profilePicture.png", Bun.file(profilePicture));
                return new Response("Success");
            default:
              return new Response("Not Found", {
                          status: 404
                        });
          }
        })
    });

export {
  server ,
}
/* server Not a pure module */
